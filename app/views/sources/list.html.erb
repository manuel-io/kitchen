<nav>
</nav>

<aside id='sources_list'>
  <% if notice %>
  <section class='notice'>
    <p id="notice"><%= notice %></p>
  </section>
  <% end %>
  
  <section>
    <p>
      Dies ist eine Liste mit verweisen auf die Quellen der Rezepte in
      dieser Datenbank. Die Rezepte in dieser Datenbank sind alle vegan.
      Dies muss aber nicht unbedingt auch auf die Rezepte in den Quellen
      zutreffen.
    </p>
  </section>

  <section>
    <%= form_tag({controller: 'sources', action: 'list'}, method: 'get') do %>
      <table>
        <tr>
          <td><%= check_box_tag(:published, 'true', @published) %></td>
          <td><%= submit_tag('Nur Ã¶ffentliche Rezepte') %></td>
        </tr>
      </table>
    <% end %>
  </section>

  <section>
    <h3>Filter</h3>
    <table>
      <tr>
        <td>
          <ul>
            <li><%= link_to 'Hauptgerichte und Suppen', list_sources_path(tags: 'main,soup') %></li>
            <li><%= link_to 'Hauptgerichte', list_sources_path(tags: 'main') %></li>
            <li><%= link_to 'Nachspeisen', list_sources_path(tags: 'dessert') %></li>
            <li><%= link_to 'Suppen', list_sources_path(tags: 'soup') %></li>
            <li><%= link_to 'Saucen', list_sources_path(tags: 'sauce') %></li>
            <li><%= link_to 'Dips', list_sources_path(tags: 'dip') %></li>
            <li><%= link_to 'Backwaren', list_sources_path(tags: 'bread') %></li>
            <li><%= link_to 'Pflanzenmilch', list_sources_path(tags: 'milk') %></li>
            <li><%= link_to 'Komponenten', list_sources_path(tags: 'ingredient') %></li>
            <li><%= link_to 'Salate', list_sources_path(tags: 'salad') %></li>
          </ul>
        </td>
      </tr>
    </table>
  </section>

  <section>
    <h3><%= t :format %></h3>
    <table>
      <tr>
        <td>
          <%= link_to 'Markdown', list_sources_path(format: :markdown, tags: params['tags']) %>
        </td>
      </tr>
      <tr>
        <td>
          <%= link_to t(:text_desc), list_sources_path(format: :text, tags: params['tags']) %>
        </td>
      </tr>
      <tr>
        <td>
          <%= link_to 'Text', list_sources_path(format: :plain, tags: params['tags']) %>
        </td>
      </tr>
    </table>
  </section>

  <section>
    <p>
      Warum hier nur die Quellen zu den eigentlich von mir zubereiteten
      Rezepten zu finden sind,
      <a href='https://manuel-io.github.io/blog/2017/06/03/recipes/'>
        steht hier
      </a>.
    </p>
  </section>
</aside>

<article>
  <h2><%= t(:list) %></h2>
  <% @recipes.each do |value| %>
    <% if value.sources.length > 0 %>
    <section id='<%= value.id %>'>
      <h3 class='recipe'><%= value.title %></h3>
      <p><%= value.description %></p>
      <p><%= t :serves_in_word, price: number_to_currency(value.price_per_serving), servings: value.serves %></p>
      <% if value.public? %>
        <p><%= t :published %>: <%= link_to(t(:click), { action: 'embedded', controller: 'recipes', id: value.id }, { target: '_blank' }) %></p>
      <% else %>
        <p><%= t :sources %>: <%= value.sources.map { |v| "<span class='source'>" + link_to(v.title, v.url) + "</span>" }.join.html_safe %></p>
      <% end %>
    <% end %>
    </section>
  <% end %>
</article>
